# language: zh-TW
功能: 訂單管理
  作為一個客戶
  我想要能夠創建和管理訂單
  以便我可以購買商品並追蹤訂單狀態

  背景:
    假設 系統已經啟動並運行
    而且 支付服務可用
    而且 消息隊列已配置

  場景: 成功創建訂單
    假設 客戶ID為 "CUST-001"
    而且 訂單金額為 100.00 元
    當 客戶創建一個新訂單
    那麼 訂單應該被成功創建
    而且 訂單狀態應該是 "PENDING"
    而且 應該發送支付請求消息

  場景: 訂單支付成功
    假設 存在一個待支付的訂單 "ORDER-001"
    而且 訂單金額為 100.00 元
    當 收到支付成功確認
    那麼 訂單狀態應該更新為 "PAID"
    而且 應該記錄支付成功事件

  場景: 訂單支付失敗
    假設 存在一個待支付的訂單 "ORDER-002"
    而且 訂單金額為 100.00 元
    當 收到支付失敗通知
    那麼 訂單狀態應該更新為 "PAYMENT_FAILED"
    而且 應該記錄支付失敗事件

  場景: 查詢訂單詳情
    假設 存在訂單 "ORDER-003" 狀態為 "PAID"
    當 客戶查詢訂單詳情
    那麼 應該返回正確的訂單信息
    而且 包含訂單ID、客戶ID、金額和狀態

  場景: 創建訂單時金額無效
    假設 客戶ID為 "CUST-002"
    而且 訂單金額為 -50.00 元
    當 客戶嘗試創建訂單
    那麼 應該返回錯誤信息
    而且 錯誤信息應該包含 "金額必須大於零"

  場景: 創建訂單時客戶ID無效
    假設 客戶ID為空
    而且 訂單金額為 100.00 元
    當 客戶嘗試創建訂單
    那麼 應該返回錯誤信息
    而且 錯誤信息應該包含 "客戶ID不能為空"

  場景大綱: 不同金額的訂單創建
    假設 客戶ID為 "CUST-003"
    而且 訂單金額為 <金額> 元
    當 客戶創建一個新訂單
    那麼 訂單應該被成功創建
    而且 訂單金額應該是 <金額> 元

    例子:
      | 金額    |
      | 10.50   |
      | 999.99  |
      | 1500.00 |